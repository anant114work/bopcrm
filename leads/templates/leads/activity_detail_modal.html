<div class="modal-header" style="background: linear-gradient(135deg, var(--primary-dark), var(--secondary)); color: white; border-radius: 12px 12px 0 0;">
    <h5 class="modal-title" style="font-weight: 600;"><i class="fas fa-history"></i> Activity Log - {{ lead.full_name }}</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body" style="padding: 0;">
    <ul class="nav nav-tabs" id="activityTabs" role="tablist" style="border-bottom: 2px solid #e5e7eb; margin: 0; padding: 0 24px;">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="reassignments-tab" data-bs-toggle="tab" data-bs-target="#reassignments" type="button" style="font-weight: 600; color: var(--primary-dark);">
                <i class="fas fa-exchange-alt"></i> Reassignments ({{ reassignments.count }})
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="views-tab" data-bs-toggle="tab" data-bs-target="#views" type="button" style="font-weight: 600; color: var(--primary-dark);">
                <i class="fas fa-eye"></i> Views ({{ views.count }})
            </button>
        </li>
    </ul>
    
    <div class="tab-content" id="activityTabContent" style="padding: 24px; max-height: 400px; overflow-y: auto;">
        <div class="tab-pane fade show active" id="reassignments" role="tabpanel">
            {% for reassignment in reassignments %}
            <div style="background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; padding: 16px; margin-bottom: 12px; border-left: 4px solid #f59e0b;">
                <div class="d-flex">
                    <div class="d-flex">
                        <i class="fas fa-user-friends"></i>
                        {{ reassignment.previous_assignee.name }} â†’ {{ reassignment.new_assignee.name }}
                    </div>
                    <span class="small">
                        {{ reassignment.timestamp|date:"M d, Y H:i" }}
                    </span>
                </div>
                {% if reassignment.reassigned_by %}
                <div style="font-size: 13px; color: #92400e; margin-bottom: 4px;">
                    <i class="fas fa-user-cog"></i> By: {{ reassignment.reassigned_by.name }}
                </div>
                {% endif %}
                {% if reassignment.reason %}
                <div style="font-size: 13px; color: #78350f; font-style: italic;">
                    <i class="fas fa-quote-left"></i> {{ reassignment.reason }}
                </div>
                {% endif %}
            </div>
            {% empty %}
            <div class="text-center">
                <i class="fas fa-exchange-alt" style="font-size: 24px; margin-bottom: 8px; opacity: 0.5;"></i>
                <div>No reassignments found</div>
            </div>
            {% endfor %}
        </div>
        
        <div class="tab-pane fade" id="views" role="tabpanel">
            {% for view in views %}
            <div style="background: linear-gradient(135deg, #dbeafe, #bfdbfe); border-radius: 12px; padding: 16px; margin-bottom: 12px; border-left: 4px solid #3b82f6;">
                <div class="d-flex">
                    <div class="d-flex">
                        <i class="fas fa-eye"></i>
                        {{ view.viewed_by.name }}
                    </div>
                    <span class="small">
                        {{ view.timestamp|date:"M d, Y H:i" }}
                    </span>
                </div>
                <div style="font-size: 13px; color: #1e40af; margin-bottom: 4px;">
                    <i class="fas fa-user-tag"></i> {{ view.viewed_by.role }}
                </div>
                {% if view.ip_address %}
                <div class="small">
                    <i class="fas fa-globe"></i> IP: {{ view.ip_address }}
                </div>
                {% endif %}
            </div>
            {% empty %}
            <div class="text-center">
                <i class="fas fa-eye-slash" style="font-size: 24px; margin-bottom: 8px; opacity: 0.5;"></i>
                <div>No views found</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>